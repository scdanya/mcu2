[output_pin Light_line]
pin: PD14
pwm:true
hardware_pwm: true
shutdown_value: 0
value:0
cycle_time: 0.0001

[output_pin Light_basement]
pin: PD15
pwm:true
hardware_pwm: true
shutdown_value: 0
value:0
cycle_time: 0.0001

[loop_macro for_light_line] 
variable_count: 0
entry:
     RESPOND MSG="Iteration limit: {5}"
gcode:
     {% if count < 5 %}
     testing_light_line
     SET_GCODE_VARIABLE MACRO=for_light_line VARIABLE=count VALUE={count + 1}
     {% else %}
     SET_GCODE_VARIABLE MACRO=for_light_line VARIABLE=count VALUE=0
     BREAK
     {% endif %}

[loop_macro for_light_line_1] 
variable_count: 0
entry:
     RESPOND MSG="Iteration limit: {10}"
gcode:
     {% if count < 10 %}
     testing_light_line_1
     SET_GCODE_VARIABLE MACRO=for_light_line_1 VARIABLE=count VALUE={count + 1}
     {% else %}
     SET_GCODE_VARIABLE MACRO=for_light_line_1 VARIABLE=count VALUE=0
     BREAK 
     {% endif %}

[gcode_macro testing_light_line]
gcode:
  {% for i in range(30) %}
  SET_PIN PIN=Light_line VALUE={i/200}
  G4 P45
  {% endfor %}
    {% for i in range(29) %}
  SET_PIN PIN=Light_line VALUE={0.15 - i/200}
  G4 P45
  {% endfor %}
   {% for i in range(30) %}
  SET_PIN PIN=Light_line VALUE={i/200}
  G4 P45
  {% endfor %}
    {% for i in range(29) %}
  SET_PIN PIN=Light_line VALUE={0.15 - i/200}
  G4 P45
  {% endfor %}
  {% for i in range(30) %}
  SET_PIN PIN=Light_line VALUE={i/200}
  G4 P45
  {% endfor %}
  SET_PIN PIN=Light_line VALUE=0.15
  
[gcode_macro Blinking_Light_Line]
gcode:
      for_light_line

[gcode_macro Blinking_Light_Line_1]
gcode:
      for_light_line_1

[gcode_macro Light_line_shutdown]
gcode: 
      SET_PIN PIN=Light_line VALUE=0

[gcode_macro Light_line_on]
gcode: 
      SET_PIN PIN=Light_line VALUE=0.15

[gcode_macro testing_light_line_1]
gcode:
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown 
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown
  G4 P500
  Light_line_on
  G4 P500
  Light_line_shutdown

  Light_line_on
